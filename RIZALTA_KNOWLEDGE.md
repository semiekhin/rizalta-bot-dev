# RIZALTA BOT ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Claude

> **–≠—Ç–æ—Ç —Ñ–∞–π–ª —á–∏—Ç–∞–µ—Ç Claude –≤ –Ω–∞—á–∞–ª–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞**

---

## üöÄ –ù–ê–ß–ê–õ–û –ù–û–í–û–ì–û –ß–ê–¢–ê

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç: **"–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º RIZALTA BOT"** –∏ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏.

**Claude –¥–æ–ª–∂–µ–Ω:**
1. –ü—Ä–æ–π—Ç–∏ –ø–æ –≤—Å–µ–º —Å—Å—ã–ª–∫–∞–º —á–µ—Ä–µ–∑ web_fetch
2. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –∫–æ–¥
3. –°–ø—Ä–æ—Å–∏—Ç—å: "–ö–∞–∫—É—é –∑–∞–¥–∞—á—É –¥–µ–ª–∞–µ–º —Å–µ–≥–æ–¥–Ω—è?"

---

## üîó –°–°–´–õ–ö–ò –î–õ–Ø –ù–ê–ß–ê–õ–ê –ß–ê–¢–ê (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª–∏–∫–æ–º)

```
–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º RIZALTA BOT

GitHub —Ä–µ–ø–æ:
https://github.com/semiekhin/rizalta-bot

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/RIZALTA_PROJECT.md
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/RIZALTA_CURRENT_TASK.md
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/RIZALTA_KNOWLEDGE.md

–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/app.py

Handlers:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/__init__.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/kp.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/ai_chat.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/menu.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/booking.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/units.py

Services:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/__init__.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/kp_search.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/ai_chat.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/telegram.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/calculations.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/data_loader.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/notifications.py

Config & Models:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/config/settings.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/config/instructions.txt
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/models/state.py

Data:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/data/units.json
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/data/rizalta_finance.json
```

---

## üìù –ö–û–ù–ï–¶ –ß–ê–¢–ê

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç: **"–æ–±–Ω–æ–≤–∏ —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞"**

**Claude –¥–æ–ª–∂–µ–Ω:**

1. –û–±–Ω–æ–≤–∏—Ç—å `RIZALTA_CURRENT_TASK.md`:
   - –î–æ–ø–∏—à–∏ –≤ "–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ —ç—Ç–æ–º —á–∞—Ç–µ"
   - –û–±–Ω–æ–≤–∏ "–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å"
   - –û–±–Ω–æ–≤–∏ "–°–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏"
   - –î–æ–±–∞–≤—å –Ω–æ–≤—ã–µ –±–∞–≥–∏ –µ—Å–ª–∏ –µ—Å—Ç—å

2. –ï—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å `RIZALTA_PROJECT.md`:
   - –î–æ–±–∞–≤—å –≤ "–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π"
   - –û–±–Ω–æ–≤–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

3. –î–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–∫–∞—á–∞—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

4. –ù–∞–ø–æ–º–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è git push:
```bash
cd ~/Downloads/rizalta-bot
git pull
cp ~/Downloads/RIZALTA_*.md .
git add .
git commit -m "Update docs: –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"
git push
```

---

## üîë –ö–õ–Æ–ß–ï–í–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| GitHub | https://github.com/semiekhin/rizalta-bot |
| –°–µ—Ä–≤–µ—Ä | 72.56.64.91 |
| –ü—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ | /opt/bot/ |
| Telegram –±–æ—Ç | @rizaboris_bot |
| –ü–æ—Ä—Ç | 8000 |
| Python | venv –≤ /opt/bot/venv/ |

---

## üõ† –ß–ê–°–¢–´–ï –ö–û–ú–ê–ù–î–´ –ù–ê –°–ï–†–í–ï–†–ï

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
```bash
ssh root@72.56.64.91
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞:
```bash
cd /opt/bot
pkill -f "python app.py"
source venv/bin/activate
nohup python app.py > bot.log 2>&1 &
```

### –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç:
```bash
fuser -k 8000/tcp
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:
```bash
tail -50 /opt/bot/bot.log
```

### –î–µ–ø–ª–æ–π –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏:
```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø–µ:
scp file.tar.gz root@72.56.64.91:/tmp/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /opt/bot
pkill -f "python app.py"
tar -xzf /tmp/file.tar.gz --exclude='.env'
source venv/bin/activate
nohup python app.py > bot.log 2>&1 &
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ù–Æ–ê–ù–°–´

1. **dotenv** ‚Äî `load_dotenv()` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –Ω–∞—á–∞–ª–µ `config/settings.py`

2. **–ê—Ä—Ö–∏–≤—ã –Ω–µ –≤—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç —Ñ–∞–π–ª—ã** ‚Äî –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cat > file << 'EOF'`

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Äî `properties.db` —Å–æ–¥–µ—Ä–∂–∏—Ç 375 –≥–æ—Å—Ç–∏–Ω–∏—á–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤, 69 –∏–∑ –Ω–∏—Ö –∏–º–µ—é—Ç –≥–æ—Ç–æ–≤—ã–µ –ö–ü (JPG)

4. **–ö–ü —Ñ–∞–π–ª—ã** ‚Äî –ª–µ–∂–∞—Ç –≤ `/opt/bot/kp_all/`, –ø–∞—Ç—Ç–µ—Ä–Ω: `kp_{–ø–ª–æ—â–∞–¥—å}m_{—Ç–∏–ø}_{–∫–æ–¥}.jpg`

5. **.env –Ω–µ –≤ git** ‚Äî —Å–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üìÇ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
/opt/bot/
‚îú‚îÄ‚îÄ app.py                    # FastAPI + webhook —Ä–æ—É—Ç–µ—Ä
‚îú‚îÄ‚îÄ .env                      # –°–µ–∫—Ä–µ—Ç—ã (–ù–ï –≤ git!)
‚îú‚îÄ‚îÄ properties.db             # SQLite: 375 –≥–æ—Å—Ç–∏–Ω–∏—á–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ settings.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ + load_dotenv()
‚îÇ   ‚îî‚îÄ‚îÄ instructions.txt      # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç AI
‚îÇ
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ kp.py                 # –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ai_chat.py            # AI + Function Calling
‚îÇ   ‚îú‚îÄ‚îÄ menu.py               # –ú–µ–Ω—é –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ booking.py            # –ó–∞–ø–∏—Å—å –Ω–∞ –ø–æ–∫–∞–∑
‚îÇ   ‚îî‚îÄ‚îÄ units.py              # ROI, —Ä–∞—Å—Å—Ä–æ—á–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ kp_search.py          # –ü–æ–∏—Å–∫ JPG —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ai_chat.py            # OpenAI –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ telegram.py           # Telegram API
‚îÇ   ‚îú‚îÄ‚îÄ calculations.py       # –§–∏–Ω–∞–Ω—Å—ã (1195 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py        # –ó–∞–≥—Ä—É–∑–∫–∞ JSON
‚îÇ   ‚îî‚îÄ‚îÄ notifications.py      # Email
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ state.py              # –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ data/                     # JSON –∫–æ–Ω—Ñ–∏–≥–∏
‚îú‚îÄ‚îÄ kp_all/                   # 69 JPG (–Ω–µ –≤ git)
‚îî‚îÄ‚îÄ docs/                     # –î–æ–∫—É–º–µ–Ω—Ç—ã (–Ω–µ –≤ git)
```

---

## üÜï –û–±–Ω–æ–≤–ª–µ–Ω–∏—è (05.12.2024)

### –ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø: –ü–ª–æ—â–∞–¥—å = –∫–ª—é—á

**–ü–ª–æ—â–∞–¥—å —É–Ω–∏–∫–∞–ª—å–Ω–∞** (69 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∏:
- –ö–ü (JPG —Ñ–∞–π–ª—ã) ‚Üî –†–∞—Å—á—ë—Ç—ã ‚Üî AI –¥–∞–Ω–Ω—ã–µ

**Callback —Ñ–æ—Ä–º–∞—Ç—ã:**
- `kp_send_247` ‚Äî –ö–ü –¥–ª—è 24.7 –º¬≤
- `calc_roi_lot_247` ‚Äî ROI –¥–ª—è 24.7 –º¬≤
- `calc_finance_lot_247` ‚Äî —Ä–∞—Å—Å—Ä–æ—á–∫–∞ –¥–ª—è 24.7 –º¬≤

**–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –ª–æ—Ç–∞ –≤ callback'–∞—Ö!**

### –î–∞–Ω–Ω—ã–µ

| –§–∞–π–ª | –ó–∞–ø–∏—Å–µ–π | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|---------|------------|
| `kp_all/*.jpg` | 69 | –ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã |
| `units.json` | 69 | –î–ª—è AI |
| `rizalta_finance.json` | 69 | –§–∏–Ω–∞–Ω—Å—ã + AI |

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ª–æ—Ç:** –í215 ‚Äî 22.0 –º¬≤ ‚Äî 13 695 000 ‚ÇΩ

### –ó–∞–ø—É—Å–∫ (uvicorn)
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pkill -9 -f "uvicorn.*8000"
sleep 2
cd /opt/bot
nohup /opt/bot/venv/bin/python3 -m uvicorn app:app --host 0.0.0.0 --port 8000 > /var/log/rizalta-bot.log 2>&1 &

# –õ–æ–≥–∏
tail -50 /var/log/rizalta-bot.log
```

### –î–∏–∞–ø–∞–∑–æ–Ω—ã –ø–ª–æ—â–∞–¥–µ–π

–ö–ü –∏ –†–∞—Å—á—ë—Ç—ã: 22-30, 31-40, 41-50, 51-70, 71-90, 90+

### –î–æ–≥–æ–≤–æ—Ä—ã

- `docs/ddu.pdf` ‚Äî –î–î–£
- `docs/arenda.pdf` ‚Äî –ê—Ä–µ–Ω–¥–∞
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫: `handlers/docs.py`

---

## üîó –ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –°–°–´–õ–û–ö –î–õ–Ø –ù–û–í–û–ì–û –ß–ê–¢–ê (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª–∏–∫–æ–º)
```
–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º RIZALTA BOT

GitHub —Ä–µ–ø–æ:
https://github.com/semiekhin/rizalta-bot

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/RIZALTA_PROJECT.md
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/RIZALTA_CURRENT_TASK.md
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/RIZALTA_KNOWLEDGE.md

–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/app.py

Handlers:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/__init__.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/kp.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/calc_dynamic.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/docs.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/ai_chat.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/menu.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/booking.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/handlers/units.py

Services:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/__init__.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/kp_search.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/ai_chat.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/telegram.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/calculations.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/data_loader.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/services/notifications.py

Config & Models:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/config/settings.py
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/models/state.py

Data:
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/data/units.json
https://raw.githubusercontent.com/semiekhin/rizalta-bot/main/data/rizalta_finance.json
```
